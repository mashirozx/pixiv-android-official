"function"!=typeof Object.assign&&(Object.assign=function(target){"use strict";if(void 0===target||null===target)throw new TypeError("Cannot convert undefined or null to object");for(var output=Object(target),index=1;index<arguments.length;index++){var source=arguments[index];if(void 0!==source&&null!==source)for(var nextKey in source)Object.prototype.hasOwnProperty.call(source,nextKey)&&(output[nextKey]=source[nextKey])}return output}),Object.prototype.values||(Object.prototype.values=function(){var o=this,r=[];for(var k in o)o.hasOwnProperty(k)&&r.push(o[k]);return r}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(searchElement,fromIndex){if(null==this)throw new TypeError('"this" is null or not defined');var o=Object(this),len=o.length>>>0;if(0===len)return!1;for(var n=0|fromIndex,k=Math.max(n>=0?n:len-Math.abs(n),0);k<len;){if(o[k]===searchElement)return!0;k++}return!1}}),function(){var mraid=window.mraid={},VERSION=mraid.VERSION="2.0",STATES=mraid.STATES={LOADING:"loading",DEFAULT:"default",EXPANDED:"expanded",HIDDEN:"hidden",RESIZED:"resized"},EVENTS=mraid.EVENTS={ERROR:"error",INFO:"info",READY:"ready",STATECHANGE:"stateChange",VIEWABLECHANGE:"viewableChange",SIZECHANGE:"sizeChange"},NATIVE_COMMAND=mraid.NATIVE_COMMAND={EXPAND:"expand",USE_CUSTOM_CLOSE:"useCustomClose",RESIZE:"resize",OPEN:"open",CLOSE:"close",SET_ORIENTATION_PROPERTIES:"setOrientationProperties"},PLACEMENT_TYPES=mraid.PLACEMENT_TYPES={UNKNOWN:"unknown",INLINE:"inline",INTERSTITIAL:"interstitial"},CUSTOM_CLOSE_POSITION=mraid.CUSTOM_CLOSE_POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",CENTER:"center",TOP_CENTER:"top-center",BOTTOM_CENTER:"bottom-center"},FORCE_ORIENTATION=mraid.FORCE_ORIENTATION={NONE:"none",PORTRAIT:"portrait",LANDSCAPE:"landscape"},expandProperties={width:!1,height:!1,useCustomClose:!1,isModal:!0},resizeProperties={width:!1,height:!1,offsetX:!1,offsetY:!1,customClosePosition:CUSTOM_CLOSE_POSITION.TOP_RIGHT,allowOffscreen:!0},orientationProperties={allowOrientationChange:!0,forceOrientation:FORCE_ORIENTATION.NONE},supportProperties={sms:!1,tel:!1,calendar:!1,storePicture:!1,inlineVideo:!1},maxSize={width:0,height:0},currentPosition={x:0,y:0,width:0,height:0},defaultPosition={x:0,y:0,width:0,height:0},screenSize={width:0,height:0},listeners={},state=STATES.LOADING,isViewable=!1,placementType=PLACEMENT_TYPES.UNKNOWN;mraid.getVersion=function(){return VERSION},mraid.getCurrentPosition=function(){return Object.assign({},currentPosition)},mraid.getDefaultPosition=function(){return Object.assign({},defaultPosition)},mraid.getMaxSize=function(){return Object.assign({},maxSize)},mraid.getExpandProperties=function(){return Object.assign({},expandProperties)},mraid.setExpandProperties=function(value){expandProperties.width=value.width,expandProperties.height=value.height,expandProperties.useCustomClose=value.useCustomClose},mraid.getPlacementType=function(){return placementType},mraid.getResizeProperties=function(){return Object.assign({},resizeProperties)},mraid.setResizeProperties=function(value){utils.updateObjectProperties(resizeProperties,value)},mraid.getScreenSize=function(){return Object.assign({},screenSize)},mraid.getState=function(){return state},mraid.isViewable=function(){return isViewable},mraid.addEventListener=function(event,listener){event&&listener?EVENTS.values().includes(event)?(listeners[event]||(listeners[event]=new EventListeners(event)),listeners[event].add(listener)):broadcastEvent(EVENTS.ERROR,"Unknown MRAID event: "+event,"addEventListener"):broadcastEvent(EVENTS.ERROR,"Both event and listener are required.","addEventListener")},mraid.removeEventListener=function(event,listener){if(event){if(listener){var success=!1;if(listeners[event]&&(success=listeners[event].remove(listener)),!success)return void broadcastEvent(EVENTS.ERROR,"Listener not currently registered for event.","removeEventListener")}else!listener&&listeners[event]&&listeners[event].removeAll();listeners[event]&&0===listeners[event].count&&(listeners[event]=null,delete listeners[event])}else broadcastEvent(EVENTS.ERROR,"Event is required.","removeEventListener")},mraid.expand=function(URL){if(this.getState()===STATES.DEFAULT||this.getState()===STATES.RESIZED){var args={shouldUseCustomClose:expandProperties.useCustomClose};URL&&(args.url=URL),bridge.executeNativeCall(NATIVE_COMMAND.EXPAND,args)}else broadcastEvent(EVENTS.ERROR,"Ad can only be expanded from the default or resized state.","expand")},mraid.useCustomClose=function(value){expandProperties.useCustomClose=value,bridge.executeNativeCall(NATIVE_COMMAND.USE_CUSTOM_CLOSE,{shouldUseCustomClose:expandProperties.useCustomClose})},mraid.resize=function(){this.getState()===STATES.DEFAULT||this.getState()===STATES.RESIZED?resizeProperties.width&&resizeProperties.height?bridge.executeNativeCall(NATIVE_COMMAND.RESIZE,{width:resizeProperties.width,height:resizeProperties.height,offsetX:resizeProperties.offsetX||0,offsetY:resizeProperties.offsetY||0,customClosePosition:resizeProperties.customClosePosition,allowOffscreen:!!resizeProperties.allowOffscreen}):broadcastEvent(EVENTS.ERROR,"Must set resize properties before calling resize()","resize"):broadcastEvent(EVENTS.ERROR,"Ad can only be resized from the default or resized state.","resize")},mraid.open=function(URL){URL?bridge.executeNativeCall(NATIVE_COMMAND.OPEN,{url:URL}):broadcastEvent(EVENTS.ERROR,"URL is required.","open")},mraid.close=function(){state!==STATES.HIDDEN?bridge.executeNativeCall(NATIVE_COMMAND.CLOSE):broadcastEvent(EVENTS.ERROR,"Ad cannot be closed when it is already hidden.","close")},mraid.supports=function(feature){return supportProperties[feature]},mraid.createCalendarEvent=function(){utils.log("createCalendarEvent is not implementation.")},mraid.playVideo=function(){utils.log("playVideo is not implementation.")},mraid.storePicture=function(){utils.log("storePicture is not implementation.")},mraid.getOrientationProperties=function(){return Object.assign({},orientationProperties)},mraid.setOrientationProperties=function(value){utils.updateObjectProperties(orientationProperties,value),bridge.executeNativeCall(NATIVE_COMMAND.SET_ORIENTATION_PROPERTIES,{allowOrientationChange:orientationProperties.allowOrientationChange,forceOrientation:orientationProperties.forceOrientation})},mraid.getEventListeners=function(){return Object.assign({},listeners)};var bridge=window.mraidbridge={nativeSDKFiredReady:!1,nativeCallQueue:[],nativeCallInFlight:!1,lastSizeChangeProperties:null};bridge.nativeCallComplete=function(command){if(utils.log(command+" complete callback"),0!==this.nativeCallQueue.length){var nextCall=this.nativeCallQueue.pop();window.location=nextCall}else this.nativeCallInFlight=!1},bridge.executeNativeCall=function(command,args){if(!this.nativeSDKFiredReady)return utils.log("rejecting "+command+" because mraid is not ready"),void bridge.notifyErrorEvent("mraid is not ready",command);var url="mraid://"+command+utils.objectToQuerystrings(args);utils.log("execute native call:"+url),this.nativeCallInFlight?this.nativeCallQueue.push(url):(this.nativeCallInFlight=!0,window.location=url)},bridge.setCurrentPosition=function(x,y,width,height){currentPosition={x:x,y:y,width:width,height:height},broadcastEvent(EVENTS.INFO,"Set current position to "+JSON.stringify(currentPosition))},bridge.setDefaultPosition=function(x,y,width,height){defaultPosition={x:x,y:y,width:width,height:height},broadcastEvent(EVENTS.INFO,"Set default position to "+JSON.stringify(defaultPosition))},bridge.setMaxSize=function(width,height){maxSize={width:width,height:height},broadcastEvent(EVENTS.INFO,"Set max size to "+JSON.stringify(maxSize))},bridge.setPlacementType=function(value){placementType=value,broadcastEvent(EVENTS.INFO,"Set placement type to "+JSON.stringify(placementType))},bridge.setScreenSize=function(width,height){screenSize={width:width,height:height},broadcastEvent(EVENTS.INFO,"Set screen size to "+JSON.stringify(screenSize))},bridge.setState=function(value){state=value,broadcastEvent(EVENTS.INFO,"Set state to "+JSON.stringify(state)),broadcastEvent(EVENTS.STATECHANGE,state)},bridge.setIsViewable=function(value){isViewable=value,broadcastEvent(EVENTS.INFO,"Set isViewable to "+JSON.stringify(isViewable)),broadcastEvent(EVENTS.VIEWABLECHANGE,isViewable)},bridge.setSupports=function(value){utils.updateObjectProperties(supportProperties,value)},bridge.notifyReadyEvent=function(){this.nativeSDKFiredReady=!0,broadcastEvent(EVENTS.READY)},bridge.notifyErrorEvent=function(message,action){broadcastEvent(EVENTS.ERROR,message,action)},bridge.notifySizeChangeEvent=function(width,height){this.lastSizeChangeProperties&&width==this.lastSizeChangeProperties.width&&height==this.lastSizeChangeProperties.height||(this.lastSizeChangeProperties={width:width,height:height},broadcastEvent(EVENTS.SIZECHANGE,width,height))};var EventListeners=function(event){this.event=event,this.count=0;var listeners={};this.add=function(func){var id=String(func);listeners[id]||(listeners[id]=func,this.count++)},this.remove=function(func){var id=String(func);return!!listeners[id]&&(listeners[id]=null,delete listeners[id],this.count--,!0)},this.removeAll=function(){for(var id in listeners)listeners.hasOwnProperty(id)&&this.remove(listeners[id])},this.broadcast=function(args){for(var id in listeners)listeners.hasOwnProperty(id)&&listeners[id].apply(mraid,args)},this.toString=function(){var out=[event,":"];for(var id in listeners)listeners.hasOwnProperty(id)&&out.push("|",id,"|");return out.join("")}},broadcastEvent=function(){for(var args=new Array(arguments.length),l=arguments.length,i=0;i<l;i++)args[i]=arguments[i];var event=args.shift();listeners[event]&&listeners[event].broadcast(args),utils.log("broadcastEvent:"+event+" args:"+JSON.stringify(args))},utils=mraid.utils={log:function(){var args=Array.prototype.slice.call(arguments);args[0]="[mraid.js]"+args[0],console.log.apply(console,args)},updateObjectProperties:function(obj,updates){for(var properties=Object.keys(obj),length=properties.length,i=0;i<length;i++){var propname=properties[i];updates.hasOwnProperty(propname)&&(obj[propname]=updates[propname])}},objectToQuerystrings:function(obj){var str=[];for(var p in obj)obj.hasOwnProperty(p)&&str.push(encodeURIComponent(p)+"="+encodeURIComponent(obj[p]));return 0===str.length?"":"?"+str.join("&")}}}();